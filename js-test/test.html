<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recolor Image on Click</title>
    <style>
        img { border: 1px solid #ccc; padding: 10px; background: #f9f9f9; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Recolor Image on Click</h1>
    <p>Click the image to recolor it:</p>
    <img id="originalImage" src="like.png" alt="Original Image">

    <script>
        const recolorImage = (src, color, callback) => {
            const img = new Image();
            img.crossOrigin = "anonymous";
            img.src = src;
            img.onload = () => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const data = imageData.data;
                const isBlack = data.reduce((sum, _, i) => i % 4 === 0 ? sum + (data[i] + data[i + 1] + data[i + 2]) / 3 : sum, 0) / (data.length / 4) < 128;
                const [r, g, b] = [parseInt(color.slice(1, 3), 16), parseInt(color.slice(3, 5), 16), parseInt(color.slice(5, 7), 16)];
                for (let i = 0; i < data.length; i += 4) {
                    if ((isBlack && data[i] < 128 && data[i + 1] < 128 && data[i + 2] < 128) || (!isBlack && data[i] > 128 && data[i + 1] > 128 && data[i + 2] > 128)) {
                        [data[i], data[i + 1], data[i + 2]] = [r, g, b];
                    }
                }
                ctx.putImageData(imageData, 0, 0);
                callback(canvas.toDataURL());
            };
            img.onerror = () => console.error('Failed to load image');
        };

        document.getElementById('originalImage').addEventListener('click', function() {
            recolorImage(this.src, '#b925d3', (newSrc) => this.src = newSrc);
        });
    </script>
</body>
</html>